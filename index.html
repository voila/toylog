<html>
<head></head>
<style>


</style>
<script src="solve.js"></script>
<script src="parser.js"></script>
<script src="jquery.js"></script>

<script>

    var parse = PARSER.parse;
    //var assert = chai.assert;

    var fmtSol = function(sols){
       return sols.refutation ?
       'No' :
       'Yes<br /><br />' + sols.subst;
    }

    // UI handlers
    $(function(){
    var p;
    $("#prog").on("blur", function(){
      try {
        console.log($(this).val());
        p = parse($(this).val()).clauses;
        $("#prog-msg").html("sweet!");
       
      }
      catch(e){
       $("#prog-msg").html(e.toString());
       //console.log(e.toString());
      }
    });


     $("#query").on("blur", function(){
      try {
        console.log($(this).val());
        var g = parse($(this).val()).clauses[0][0];
        var s = solve(g, p);
        
        $("#query-msg").html(fmtSol(s));
       
      }
      catch(e){
       $("#query-msg").html(e.toString());
       //console.log(e.toString());
      }
    });


    });

/*
append(nil,L,L).
append(cons(H,L1),L2,cons(H,L3)) :- append(L1,L2,L3).

append(cons(a,cons(b,nil)),cons(c,cons(d,nil)),Y).
*/  
</script>
<body>


<textarea id="prog" rows="15" cols="55">
append(nil,L,L).
append(cons(H,L1),L2,cons(H,L3)) :- append(L1,L2,L3).

</textarea>

<p id="prog-msg"></p>

<textarea id="query" rows="5" cols="55">
append(cons(a,cons(b,nil)),cons(c,cons(d,nil)),Y).

</textarea>


<p id="query-msg"></p>

</body>
